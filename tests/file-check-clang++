#!/bin/bash
FILECHECK=$1
CLANG=$2
ARGS=${*:3}
SOURCE=$(echo $ARGS | grep -oP '\S+\.cpp\b')
OBJ=$(echo $ARGS | grep -oP '\S+\.o\b')
$CLANG $ARGS 2>&1 | $FILECHECK -check-prefix=CLANG $SOURCE
if [ "$?" -eq 0 ]; then
  touch $OBJ
else
  exit 1
fi
